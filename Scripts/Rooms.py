import os

from PIL import Image, ImageDraw
import numpy as np
from numba import njit
import uuid
import timeit

from Files.Files import alpha_0_floor, alpha_1_floor, alpha_2_floor, alpha_3_floor, alpha_4_floor, alpha_5_floor

prefirst_floor_coord = {'ц-21': [8315, 3485, 8465, 3744],
                        'ц-21а': [8467, 3485, 8617, 3744],
                        'ц-22': [8467, 3857, 8617, 4116],
                        'ц-23': [7859, 3857, 8009, 4116],
                        'ц-24': [7555, 3857, 7856, 4116],
                        'ц-24б': [7555, 3160, 7689, 3421],
                        'ц-25': [6877, 3603, 7047, 3864],
                        'ц-26': [6704, 3603, 6874, 3864],
                        'ц-27': [6531, 3604, 6702, 3864],
                        'ц-28': [6358, 3604, 6529, 3864],
                        'ц-29': [6185, 3604, 6356, 3864],
                        'ц-30': [6012, 3604, 6183, 3864],
                        'ц-31': [5840, 3604, 6010, 3864],
                        'ц-32': [5667, 3604, 5837, 3864],
                        'ц-33': [5494, 3604, 5664, 3864],
                        'ц-33б': [5172, 3603, 5492, 3947],
                        'ц-34': [3635, 3603, 3805, 3864],
                        'ц-35': [3462, 3603, 3632, 3864],
                        'ц-36': [3289, 3603, 3459, 3864],
                        'ц-37': [3116, 3603, 3287, 3864],
                        'ц-38': [2943, 3603, 3114, 3864],
                        'ц-39': [2425, 3603, 2768, 3864],
                        'ц-39а': [2770, 3603, 2941, 3864],
                        'ц-40': [2252, 3603, 2422, 3864],
                        'ц-41': [6877, 3161, 7047, 3421],
                        'ц-42': [6704, 3161, 6874, 3421],
                        'ц-43': [6531, 3161, 6702, 3421],
                        'ц-44': [6358, 3161, 6529, 3421],
                        'ц-45': [6185, 3161, 6356, 3421],
                        'ц-46': [6012, 3161, 6183, 3421],
                        'ц-46а': [5667, 3161, 5837, 3421],
                        'ц-47': [3462, 3161, 3632, 3421],
                        'ц-48': [3289, 3161, 3459, 3421],
                        'ц-49': [2943, 3161, 3114, 3421],
                        'ц-49а': [2770, 3161, 2941, 3421],
                        'ц-50': [2598, 3161, 2768, 3421],
                        'ц-51': [2425, 3161, 2595, 3421],
                        'ц-52': [2252, 3161, 2422, 3421],
                        'ц-53': [1456, 3060, 1744, 3158],
                        'ц-53а': [1601, 3161, 1744, 3421],
                        'ц-54': [1456, 2907, 1744, 3058],
                        'ц-55': [1456, 2752, 1744, 2904],
                        'ц-58': [1456, 1983, 1744, 2136],
                        'ц-60а': [1775, 919, 1929, 1576],
                        'ц-60': [1619, 919, 1773, 1184],
                        'ц-61': [1150, 919, 1304, 1184],
                        'ц-62': [995, 919, 1148, 1184],
                        'ц-63': [838, 919, 992, 1184],
                        'ц-64': [682, 919, 836, 1184],
                        'ц-65а': [682, 1312, 836, 1576],
                        'ц-65': [838, 1312, 992, 1576],
                        'ц-66': [995, 1312, 1148, 1576],
                        'ц-67': [1048, 2138, 1336, 2289],
                        'ц-68': [1048, 2291, 1336, 2904],
                        'ц-69': [1048, 2907, 1336, 3058],
                        'ц-70': [986, 3485, 1136, 3744],
                        'ц-71': [834, 3485, 984, 3744],
                        'ц-72': [682, 3857, 832, 4116],
                        'ц-73': [834, 3857, 984, 4116],
                        'ц-74': [1138, 3857, 1288, 4116],
                        'ц-75': [1290, 3857, 1440, 4116],
                        'ц-76': [1442, 3857, 1593, 4116],
                        'ц-77': [1594, 3857, 1744, 4116],
                        'ц-78': [1455, 3603, 1744, 3744],
                        'н-9': [3895, 2444, 3960, 2608],
                        'н-10': [3895, 2444, 3960, 2608],
                        'н-11': [3895, 2444, 3960, 2608],
                        'н-12': [3895, 2444, 3960, 2608],
                        'н-13': [3895, 2444, 3960, 2608],
                        'н-14': [3895, 2444, 3960, 2608],
                        'н-15': [3895, 2444, 3960, 2608],
                        'н-16': [3895, 2444, 3960, 2608],
                        'ру-цл': [8163, 3485, 8313, 3744],
                        'ру-цд': [3116, 3161, 3287, 3421]}
first_floor_coord = {'1-15': [8315, 3475, 8465, 3733],
                     '1-16': [8467, 3475, 8617, 4105],
                     '1-16а': [8315, 3845, 8465, 4105],
                     '1-17': [8163, 3845, 8313, 4105],
                     '1-18': [8011, 3845, 8161, 4105],
                     '1-19': [7858, 3845, 8009, 4105],
                     '1-20': [7706, 3845, 7857, 4105],
                     '1-20а': [7555, 3592, 7857, 3733],
                     '1-21': [7555, 3845, 7705, 4105],
                     '1-22': [6876, 3592, 7047, 3853],
                     '1-22а': [7826, 3148, 7961, 3410],
                     '1-23': [6704, 3592, 6875, 3853],
                     '1-24': [6531, 3592, 6702, 3852],
                     '1-25': [6358, 3592, 6529, 3852],
                     '1-26': [6185, 3592, 6356, 3852],
                     '1-27': [6012, 3592, 6183, 3852],
                     '1-28': [5840, 3592, 6010, 3852],
                     '1-29': [5667, 3592, 5837, 3852],
                     '1-30': [5494, 3592, 5664, 3852],
                     '1-31': [5172, 3592, 5492, 3936],
                     '1-32': [3807, 3592, 4127, 3936],
                     '1-33': [3635, 3592, 3805, 3852],
                     '1-34': [3462, 3592, 3632, 3852],
                     '1-35': [3289, 3592, 3459, 3852],
                     '1-36': [3116, 3592, 3287, 3852],
                     '1-37': [2943, 3592, 3114, 3852],
                     '1-38': [2770, 3592, 2941, 3852],
                     '1-39': [2598, 3592, 2768, 3852],
                     '1-40': [2252, 3592, 2422, 3852],
                     '1-41': [6877, 3149, 7047, 3409],
                     '1-42': [6704, 3149, 6874, 3409],
                     '1-43': [6531, 3149, 6702, 3409],
                     '1-44': [6358, 3149, 6529, 3409],
                     '1-45': [6185, 3149, 6356, 3409],
                     '1-46': [5840, 3149, 6010, 3409],
                     '1-47': [5667, 3149, 5837, 3409],
                     '1-48': [3462, 3149, 3632, 3409],
                     '1-49': [3289, 3149, 3459, 3409],
                     '1-50': [2943, 3149, 3114, 3409],
                     '1-51': [2770, 3149, 2941, 3409],
                     '1-52': [2598, 3149, 2768, 3409],
                     '1-53': [2425, 3149, 2595, 3409],
                     '1-54': [2252, 3149, 2422, 3409],
                     '1-54а': [1601, 3148, 1744, 3409],
                     '1-55': [1455, 2895, 1744, 3047],
                     '1-56': [1455, 2741, 1744, 2893],
                     '1-57': [1455, 2433, 1744, 2586],
                     '1-57а': [1455, 2587, 1744, 2739],
                     '1-58': [1455, 2280, 1744, 2431],
                     '1-59': [1455, 2125, 1744, 2278],
                     '1-60': [1455, 1972, 1744, 2124],
                     '1-61': [1747, 1300, 1929, 1564],
                     '1-61а': [1455, 1567, 1744, 1843],
                     '1-62': [1775, 908, 1929, 1173],
                     '1-63': [1462, 908, 1617, 1173],
                     '1-63в': [1150, 908, 1304, 1173],
                     '1-64': [994, 908, 1148, 1173],
                     '1-65': [837, 908, 993, 1173],
                     '1-66': [682, 908, 837, 1173],
                     '1-67': [682, 1301, 837, 1566],
                     '1-68': [837, 1301, 993, 1566],
                     '1-69': [994, 1301, 1149, 1566],
                     '1-70': [1048, 1973, 1337, 2124],
                     '1-71': [1048, 2125, 1337, 2278],
                     '1-72': [1048, 2280, 1337, 2431],
                     '1-72а': [1048, 2433, 1337, 2586],
                     '1-73': [1048, 2587, 1337, 2739],
                     '1-74': [1048, 2741, 1337, 2893],
                     '1-75': [1048, 2895, 1337, 3047],
                     '1-76': [986, 3475, 1136, 3733],
                     '1-77': [834, 3475, 984, 3733],
                     '1-78': [682, 3475, 832, 3733],
                     '1-79': [682, 3845, 832, 4105],
                     '1-80': [834, 3845, 984, 4105],
                     '1-81': [1138, 3845, 1288, 4105],
                     '1-82': [1290, 3845, 1440, 4105],
                     '1-83': [1442, 3845, 1593, 4105],
                     '1-84': [1594, 3845, 1744, 4105],
                     '1-85': [1455, 3592, 1744, 3733],
                     'ру-1б': [1455, 1845, 1744, 1970],
                     'ру-1д': [3116, 3149, 3287, 3409],
                     'ру-1к': [6012, 3149, 6183, 3409],
                     'ру-1л': [8163, 3475, 8313, 3733]}
second_floor_coord = {'2-19': [7555, 3411, 7843, 3551],
                      '2-20': [8163, 3293, 8313, 3551],
                      '2-21': [8315, 3293, 8465, 3551],
                      '2-22': [8467, 3293, 8617, 3551],
                      '2-22а': [7555, 3553, 7712, 3662],
                      '2-23': [8467, 3664, 8617, 3922],
                      '2-24': [8315, 3664, 8465, 3922],
                      '2-25': [8163, 3664, 8313, 3922],
                      '2-26': [8011, 3664, 8161, 3922],
                      '2-27': [7859, 3664, 8009, 3922],
                      '2-28': [7555, 3664, 7856, 3922],
                      '2-29': [7555, 2967, 7689, 3228],
                      '2-29а': [7826, 2967, 7961, 3228],
                      '2-31': [6877, 3411, 7047, 3671],
                      '2-32': [6704, 3411, 6874, 3671],
                      '2-31а': [6531, 3411, 6702, 3671],
                      '2-32а': [6358, 3411, 6529, 3671],
                      '2-33а': [6185, 3411, 6356, 3671],
                      '2-34': [5667, 3411, 5837, 3671],
                      '2-35': [5494, 3411, 5664, 3671],
                      '2-36': [5172, 3411, 5492, 3754],
                      '2-38а': [4129, 3411, 4335, 3671],
                      '2-38': [3807, 3411, 4127, 3754],
                      '2-39': [3635, 3411, 3805, 3671],
                      '2-40': [3289, 3411, 3459, 3671],
                      '2-40а': [3462, 3411, 3632, 3671],
                      '2-40б': [3116, 3411, 3287, 3671],
                      '2-41': [2770, 3411, 2941, 3671],
                      '2-41а': [2943, 3411, 3114, 3671],
                      '2-42': [2425, 3411, 2595, 3671],
                      '2-43': [2252, 3411, 2422, 3671],
                      '2-44': [6877, 2967, 7047, 3228],
                      '2-45': [6012, 2967, 6183, 3228],
                      '2-46': [5840, 2967, 6010, 3228],
                      '2-47': [4964, 2967, 5170, 3228],
                      '2-48': [4129, 2967, 4335, 3228],
                      '2-49': [3289, 2967, 3459, 3228],
                      '2-50': [3116, 2967, 3287, 3228],
                      '2-51': [2425, 2967, 2595, 3228],
                      '2-52': [2252, 2967, 2422, 3228],
                      '2-53': [1456, 2713, 1744, 2866],
                      '2-53а': [1601, 2967, 1744, 3228],
                      '2-54': [1456, 2560, 1744, 2711],
                      '2-55': [1456, 2405, 1744, 2558],
                      '2-56': [1456, 2252, 1744, 2404],
                      '2-57': [1456, 2099, 1744, 2250],
                      '2-58': [1456, 1659, 1744, 1789],
                      '2-59': [1747, 1117, 1928, 1382],
                      '2-60': [1775, 726, 1929, 991],
                      '2-61': [1619, 726, 1773, 991],
                      '2-62': [1462, 726, 1617, 991],
                      '2-63а': [1562, 1117, 1744, 1382],
                      '2-63': [1150, 726, 1304, 991],
                      '2-64': [995, 726, 1148, 991],
                      '2-65': [838, 726, 992, 991],
                      '2-66': [682, 726, 836, 991],
                      '2-67': [682, 1117, 836, 1382],
                      '2-68': [838, 1117, 992, 1382],
                      '2-68а': [995, 1117, 1148, 1382],
                      '2-69': [1048, 1944, 1336, 2096],
                      '2-70': [1048, 2099, 1336, 2250],
                      '2-71': [1048, 2252, 1336, 2404],
                      '2-72': [1048, 2405, 1336, 2558],
                      '2-73': [1048, 2560, 1336, 2711],
                      '2-74': [1048, 2713, 1336, 2865],
                      '2-75': [986, 3293, 1136, 3551],
                      '2-76': [834, 3293, 984, 3551],
                      '2-77': [682, 3293, 832, 3551],
                      '2-78': [682, 3664, 832, 3922],
                      '2-79': [834, 3664, 984, 3922],
                      '2-80': [986, 3664, 1136, 3922],
                      '2-81': [1138, 3664, 1288, 3922],
                      '2-82': [1290, 3664, 1440, 3922],
                      '2-83': [1442, 3664, 1744, 3922],
                      '2-84': [1455, 3411, 1744, 3551],
                      'ру-2б': [1456, 1536, 1744, 1657],
                      'цфа': [4295, 2250, 5004, 2965],
                      'юфа': [6150, 2250, 6737, 2965],
                      'сфа': [2562, 2250, 3149, 2965]}
third_floor_coord = {'3-22': [8197, 3130, 8337, 3369],
                     '3-23': [8338, 3130, 8477, 3369],
                     '3-24': [8479, 3130, 8618, 3369],
                     '3-25': [8338, 3473, 8477, 3712],
                     '3-26': [8197, 3473, 8337, 3712],
                     '3-27': [8057, 3473, 8197, 3712],
                     '3-28': [7917, 3473, 8056, 3712],
                     '3-29': [7776, 3473, 7916, 3712],
                     '3-30': [7636, 3473, 7775, 3712],
                     '3-31': [7636, 3239, 7904, 3369],
                     '3-31а': [7888, 2829, 8011, 3070],
                     '3-31б': [7636, 2829, 7760, 3070],
                     '3-32': [6850, 3239, 7167, 3480],
                     '3-32б': [6691, 3239, 6848, 3480],
                     '3-32а': [6531, 3239, 6688, 3480],
                     '3-33': [6371, 3239, 6529, 3480],
                     '3-34': [6212, 3239, 6369, 3480],
                     '3-35': [6052, 3239, 6209, 3480],
                     '3-36': [5892, 3239, 6050, 3480],
                     '3-37': [5733, 3239, 5890, 3480],
                     '3-38': [5435, 3240, 5730, 3557],
                     '3-39': [5243, 3239, 5433, 3480],
                     '3-40': [5049, 3239, 5241, 3480],
                     '3-41': [4857, 3239, 5048, 3480],
                     '3-42': [4664, 3239, 4855, 3480],
                     '3-43': [4471, 3239, 4663, 3480],
                     '3-45': [3697, 3241, 4172, 3480],
                     '3-46': [3536, 3239, 3693, 3480],
                     '3-47а': [3376, 3239, 3534, 3480],
                     '3-47': [3216, 3239, 3374, 3480],
                     '3-48': [2897, 3239, 3215, 3480],
                     '3-49': [2740, 3239, 2897, 3480],
                     '3-50': [7010, 2829, 7167, 3070],
                     '3-51': [6850, 2829, 7008, 3070],
                     '3-51а': [6531, 2829, 6688, 3070],
                     '3-52': [6371, 2829, 6529, 3070],
                     '3-53': [5892, 2829, 6050, 3070],
                     '3-54': [6052, 2829, 6209, 3070],
                     '3-55': [4471, 2829, 5433, 3070],
                     '3-56а': [3855, 2829, 4012, 3070],
                     '3-56': [3695, 2829, 3853, 3070],
                     '3-57': [3376, 2829, 3534, 3070],
                     '3-58': [3216, 2829, 3374, 3070],
                     '3-59а': [3057, 2829, 3215, 3070],
                     '3-59': [2737, 2829, 2896, 3070],
                     '3-60': [2137, 2829, 2269, 3070],
                     '3-61': [2002, 2595, 2269, 2736],
                     '3-62': [2002, 2453, 2269, 2593],
                     '3-63': [2002, 2311, 2269, 2451],
                     '3-64': [2002, 2027, 2269, 2167],
                     '3-65': [2002, 1885, 2269, 2025],
                     '3-66': [2002, 1742, 2269, 1883],
                     '3-67': [2002, 1621, 2269, 1740],
                     '3-68': [2271, 1121, 2439, 1366],
                     '3-69': [2297, 759, 2440, 1005],
                     '3-70': [2152, 759, 2296, 1005],
                     '3-71': [2008, 759, 2152, 1005],
                     '3-72': [1720, 759, 1862, 1005],
                     '3-73': [1288, 759, 1718, 1366],
                     '3-74': [1625, 1742, 1892, 1883],
                     '3-75': [1625, 1885, 1892, 2025],
                     '3-76': [1625, 2027, 1892, 2167],
                     '3-77': [1625, 2169, 1892, 2310],
                     '3-78': [1625, 2453, 1892, 2593],
                     '3-79': [1625, 2595, 1892, 2736],
                     '3-80': [1568, 3130, 1707, 3369],
                     '3-80а': [1428, 3130, 1567, 3369],
                     '3-80б': [1288, 3130, 1426, 3369],
                     '3-81': [1288, 3473, 1426, 3712],
                     '3-82': [1428, 3473, 1567, 3712],
                     '3-83': [1568, 3473, 1707, 3712],
                     '3-83а': [1709, 3473, 1847, 3712],
                     '3-84': [1849, 3473, 1988, 3712],
                     '3-85': [1990, 3473, 2269, 3712],
                     '3-86': [2002, 3239, 2269, 3369],
                     'ру-3б': [2002, 1507, 2269, 1620],
                     'ру-3д': [3536, 2829, 3693, 3070]}
fourth_floor_coord = {'4-17': [8734, 3367, 8887, 3626],
                      '4-18': [8888, 3738, 9040, 3997],
                      '4-19': [8581, 3738, 8733, 3997],
                      '4-19а': [8427, 3738, 8579, 3997],
                      '4-20': [8274, 3738, 8425, 3997],
                      '4-21': [7966, 3627, 8272, 3997],
                      '4-22а': [8241, 3042, 8377, 3303],
                      '4-22б': [7966, 3042, 8102, 3303],
                      '4-23а': [7281, 3485, 7454, 3746],
                      '4-23': [6932, 3485, 7280, 3746],
                      '4-24': [6758, 3485, 6930, 3746],
                      '4-25': [6583, 3485, 6755, 3746],
                      '4-26': [6408, 3485, 6581, 3746],
                      '4-26а': [6059, 3485, 6231, 3746],
                      '4-27': [5885, 3485, 6057, 3746],
                      '4-28': [5560, 3485, 5883, 3829],
                      '4-29': [5349, 3485, 5558, 3746],
                      '4-30': [5138, 3485, 5347, 3746],
                      '4-31': [4927, 3485, 5136, 3746],
                      '4-32': [4716, 3485, 4925, 3746],
                      '4-33': [4505, 3485, 4715, 3746],
                      '4-34': [4181, 3485, 4503, 3829],
                      '4-35': [4006, 3485, 4179, 3746],
                      '4-36': [3657, 3485, 4004, 3746],
                      '4-37': [3482, 3485, 3654, 3746],
                      '4-38': [3308, 3485, 3480, 3746],
                      '4-39а': [2958, 3485, 3306, 3746],
                      '4-39': [2609, 3485, 2956, 3746],
                      '4-40': [7281, 3042, 7453, 3303],
                      '4-41': [6932, 3042, 7280, 3303],
                      '4-42': [6583, 3042, 6930, 3303],
                      '4-43': [6233, 3042, 6406, 3303],
                      '4-44': [6059, 3042, 6231, 3303],
                      '4-45': [3831, 3042, 4004, 3303],
                      '4-46': [3657, 3042, 3829, 3303],
                      '4-47': [3482, 3042, 3654, 3303],
                      '4-48': [3308, 3042, 3480, 3303],
                      '4-49': [3133, 3042, 3306, 3303],
                      '4-50': [2958, 3042, 3131, 3303],
                      '4-51': [2609, 3042, 2956, 3303],
                      '4-52': [1952, 3042, 2097, 3303],
                      '4-53': [1805, 2789, 2097, 2941],
                      '4-54': [1805, 2635, 2097, 2787],
                      '4-55': [1805, 2481, 2097, 2633],
                      '4-56': [1805, 2327, 2097, 2480],
                      '4-57': [1805, 2174, 2097, 2325],
                      '4-58': [1805, 2020, 2097, 2172],
                      '4-59': [1805, 1739, 2097, 1865],
                      '4-60': [1912, 1194, 2284, 1459],
                      '4-61': [2127, 803, 2284, 1068],
                      '4-62': [1969, 803, 2125, 1068],
                      '4-63': [1811, 803, 1967, 1068],
                      '4-64': [1654, 803, 1810, 1068],
                      '4-65': [1496, 803, 1652, 1068],
                      '4-65а': [1023, 803, 1494, 1459],
                      '4-66': [1392, 1866, 1685, 2019],
                      '4-67': [1392, 2020, 1685, 2172],
                      '4-68': [1392, 2174, 1685, 2325],
                      '4-69': [1392, 2327, 1685, 2480],
                      '4-70': [1392, 2481, 1685, 2633],
                      '4-71': [1392, 2789, 1685, 2940],
                      '4-72': [1330, 3367, 1482, 3626],
                      '4-73': [1177, 3367, 1328, 3626],
                      '4-74': [1023, 3738, 1175, 3997],
                      '4-75': [1177, 3738, 1635, 3997],
                      '4-76': [1637, 3738, 1790, 3997],
                      '4-77': [1791, 3738, 1943, 3997],
                      '4-78': [1945, 3738, 2097, 3997],
                      '4-78а': [1805, 3485, 2097, 3626],
                      'ру-4б': [1805, 1611, 2097, 1738]}
fifth_floor_coord = {'5-18': [8568, 3443, 9040, 3707],
                     '5-19': [8409, 3709, 9040, 4088],
                     '5-20': [8251, 3823, 8408, 4088],
                     '5-21': [8093, 3823, 8250, 4088],
                     '5-22': [7935, 3823, 8091, 4088],
                     '5-22а': [7935, 3564, 8236, 3708],
                     '5-23': [7051, 3564, 7408, 3831],
                     '5-24': [6871, 3564, 7049, 3831],
                     '5-25': [6512, 3564, 6690, 3831],
                     '5-26': [6152, 3564, 6510, 3831],
                     '5-27': [5793, 3564, 6151, 3831],
                     '5-33': [3861, 3564, 4038, 3831],
                     '5-33а': [3681, 3564, 3859, 3831],
                     '5-34': [3502, 3564, 3680, 3831],
                     '5-33в': [3322, 3564, 3500, 3831],
                     '5-35': [2962, 3564, 3320, 3831],
                     '5-36': [2604, 3564, 2961, 3831],
                     '5-37': [2424, 3564, 2602, 3831],
                     '5-38а': [7935, 3110, 8075, 3377],
                     '5-38': [7230, 3110, 7408, 3377],
                     '5-39': [6871, 3110, 7228, 3377],
                     '5-40': [6512, 3110, 6869, 3377],
                     '5-41': [6333, 3110, 6510, 3377],
                     '5-42': [5973, 3110, 6330, 3377],
                     '5-43': [3680, 3110, 3859, 3377],
                     '5-44': [3502, 3110, 3680, 3377],
                     '5-45': [3322, 3110, 3500, 3377],
                     '5-46': [2962, 3110, 3320, 3377],
                     '5-47': [2604, 3110, 2961, 3377],
                     '5-48': [2424, 3110, 2602, 3377],
                     '5-48а': [1748, 3110, 1897, 3377],
                     '5-49': [1596, 2850, 1897, 3006],
                     '5-50': [1596, 2536, 1897, 2691],
                     '5-51': [1596, 2063, 1897, 2377],
                     '5-52': [1596, 1906, 1897, 2061],
                     '5-52а': [1596, 1645, 1897, 1904],
                     '5-53': [1706, 1217, 2088, 1488],
                     '5-54': [1928, 816, 2088, 1089],
                     '5-55': [1766, 816, 1926, 1089],
                     '5-56': [1604, 816, 1764, 1089],
                     '5-57': [1441, 816, 1602, 1089],
                     '5-58': [1279, 816, 1439, 1089],
                     '5-59': [792, 816, 1277, 1488],
                     '5-60': [1172, 1906, 1473, 2219],
                     '5-61': [1172, 2220, 1473, 2691],
                     '5-62': [1172, 2850, 1473, 3006],
                     '5-63': [1108, 3443, 1264, 3708],
                     '5-64': [792, 3443, 1106, 3708],
                     '5-65': [792, 3823, 948, 4088],
                     '5-66': [950, 3823, 1264, 4088],
                     '5-67': [1266, 3823, 1422, 4088],
                     '5-68б': [1424, 3823, 1581, 4088],
                     '5-68': [1582, 3823, 1897, 4088],
                     '5-68а': [1740, 3709, 1897, 3822],
                     '5-69': [1596, 3564, 1897, 3707],
                     'библиотека': [4374, 3110, 5458, 3831],
                     'ниияф': [7743, 816, 9040, 1488]}

prefirst_floor = {'ц-21': [9020, 3871],
                  'ц-21а': [9236, 3871],
                  'ц-22': [9236, 4302],
                  'ц-23': [8514, 4302],
                  'ц-24': [8298, 4302],
                  'ц-24б': [8226, 3585],
                  'ц-25': [7504, 4015],
                  'ц-26': [7360, 4015],
                  'ц-27': [7143, 4015],
                  'ц-28': [6927, 4015],
                  'ц-29': [6783, 4015],
                  'ц-30': [6566, 4015],
                  'ц-31': [6422, 4015],
                  'ц-32': [6205, 4015],
                  'ц-33': [5989, 4015],
                  'ц-33б': [5772, 4015],
                  'ц-34': [3968, 4015],
                  'ц-35': [3824, 4015],
                  'ц-36': [3608, 4015],
                  'ц-37': [3463, 4015],
                  'ц-38': [3247, 4015],
                  'ц-39': [2742, 4015],
                  'ц-39а': [3102, 4015],
                  'ц-40': [2450, 3900],
                  'ц-41': [7504, 3585],
                  'ц-42': [7288, 3585],
                  'ц-43': [7143, 3585],
                  'ц-44': [6850, 3410],
                  'ц-45': [6710, 3585],
                  'ц-46': [6500, 3410],
                  'ц-46а': [6205, 3585],
                  'ц-47': [3824, 3585],
                  'ц-48': [3608, 3585],
                  'ц-49': [3247, 3585],
                  'ц-49а': [3102, 3585],
                  'ц-50': [2886, 3585],
                  'ц-51': [2669, 3585],
                  'ц-52': [2525, 3585],
                  'ц-53': [1804, 3334],
                  'ц-53а': [1804, 3585],
                  'ц-54': [1804, 3154],
                  'ц-55': [1600, 3000],
                  'ц-58': [1804, 2222],
                  'ц-60а': [2020, 1362],
                  'ц-60': [1804, 1147],
                  'ц-61': [1298, 1147],
                  'ц-62': [1154, 1147],
                  'ц-63': [938, 1147],
                  'ц-64': [793, 1147],
                  'ц-65а': [793, 1577],
                  'ц-65': [938, 1577],
                  'ц-66': [1154, 1577],
                  'ц-67': [1298, 2366],
                  'ц-68': [1298, 2500],
                  'ц-69': [1150, 3150],
                  'ц-70': [1154, 3871],
                  'ц-71': [938, 3871],
                  'ц-72': [793, 4302],
                  'ц-73': [938, 4302],
                  'ц-74': [1298, 4302],
                  'ц-75': [1443, 4302],
                  'ц-76': [1659, 4302],
                  'ц-77': [1804, 4302],
                  'ц-78': [1731, 3943],
                  'н-9': [4200, 2700],
                  'н-10': [4200, 2700],
                  'н-11': [4200, 2700],
                  'н-12': [4200, 2700],
                  'н-13': [4200, 2700],
                  'н-14': [4200, 2700],
                  'н-15': [4200, 2700],
                  'н-16': [4200, 2700],
                  'ру-цл': [8875, 3871],
                  'ру-цд': [3463, 3513]}
first_floor = {'1-15': [8982, 3854],
               '1-16': [9186, 4286],
               '1-16а': [9078, 4226],
               '1-17': [8910, 4258],
               '1-18': [8670, 4166],
               '1-19': [8538, 4170],
               '1-20': [8422, 4226],
               '1-20а': [8150, 3900],
               '1-21': [8242, 4154],
               '1-22': [7540, 3910],
               '1-22а': [8530, 3606],
               '1-23': [7360, 3910],
               '1-24': [7160, 3910],
               '1-25': [7000, 3910],
               '1-26': [6800, 3910],
               '1-27': [6600, 3910],
               '1-28': [6400, 3910],
               '1-29': [6200, 3910],
               '1-30': [6000, 3910],
               '1-31': [5800, 3910],
               '1-32': [4136, 3910],
               '1-33': [4000, 3910],
               '1-34': [3750, 3900],
               '1-35': [3692, 3910],
               '1-36': [3504, 3910],
               '1-37': [3308, 3910],
               '1-38': [3124, 3910],
               '1-39': [2944, 3910],
               '1-40': [2571, 3910],
               '1-41': [7544, 3450],
               '1-42': [7354, 3450],
               '1-43': [7184, 3450],
               '1-44': [6984, 3450],
               '1-45': [6792, 3450],
               '1-46': [6428, 3450],
               '1-47': [6232, 3450],
               '1-48': [3880, 3450],
               '1-49': [3711, 3450],
               '1-50': [3323, 3450],
               '1-51': [3131, 3450],
               '1-52': [2939, 3450],
               '1-53': [2763, 3450],
               '1-54': [2575, 3450],
               '1-54а': [1741, 3422],
               '1-55': [1850, 3158],
               '1-56': [1850, 2974],
               '1-57': [1600, 2650],
               '1-57а': [1850, 2822],
               '1-58': [1850, 2490],
               '1-59': [1850, 2318],
               '1-60': [1600, 2150],
               '1-61': [1900, 1420],
               '1-61а': [1850, 1750],
               '1-62': [2053, 1000],
               '1-63': [1600, 1000],
               '1-63в': [1381, 1000],
               '1-64': [1213, 1000],
               '1-65': [1033, 1000],
               '1-66': [870, 1000],
               '1-67': [740, 1420],
               '1-68': [920, 1420],
               '1-69': [1100, 1420],
               '1-70': [1150, 2158],
               '1-71': [1150, 2334],
               '1-72': [1150, 2498],
               '1-72а': [1150, 2654],
               '1-73': [1150, 2826],
               '1-74': [1150, 2994],
               '1-75': [1150, 3146],
               '1-76': [1193, 3800],
               '1-77': [1037, 3800],
               '1-78': [873, 3800],
               '1-79': [877, 4200],
               '1-80': [1029, 4200],
               '1-81': [1357, 4200],
               '1-82': [1525, 4200],
               '1-83': [1677, 4200],
               '1-84': [1849, 4200],
               '1-85': [1580, 3880],
               'ру-1б': [1850, 2006],
               'ру-1д': [3503, 3450],
               'ру-1к': [6620, 3450],
               'ру-1л': [8806, 3802]
               }
second_floor = {'2-19': [8330, 3740],
                '2-20': [8910, 3668],
                '2-21': [9055, 3668],
                '2-22': [9199, 3668],
                '2-22а': [8258, 3884],
                '2-23': [9199, 4100],
                '2-24': [9055, 4100],
                '2-25': [8910, 4100],
                '2-26': [8765, 4100],
                '2-27': [8460, 4100],
                '2-28': [8150, 4100],
                '2-29': [8258, 3380],
                '2-29а': [8547, 3380],
                '2-31': [7533, 3812],
                '2-32': [7388, 3812],
                '2-31а': [7171, 3812],
                '2-32а': [6954, 3812],
                '2-33а': [6809, 3812],
                '2-34': [6229, 3812],
                '2-35': [6084, 3812],
                '2-36': [5795, 3700],
                '2-38а': [4563, 3812],
                '2-38': [4346, 3700],
                '2-39': [4056, 3812],
                '2-40': [3622, 3812],
                '2-40а': [3839, 3812],
                '2-40б': [3477, 3812],
                '2-41': [3114, 3812],
                '2-41а': [3332, 3812],
                '2-42': [2630, 3812],
                '2-43': [2430, 3812],
                '2-44': [7533, 3380],
                '2-45': [6475, 3200],
                '2-46': [6290, 3200],
                '2-47': [5350, 3200],
                '2-48': [4563, 3380],
                '2-49': [3622, 3380],
                '2-50': [3477, 3380],
                '2-51': [2680, 3380],
                '2-52': [2535, 3380],
                '2-53': [1738, 3021],
                '2-53а': [1811, 3380],
                '2-54': [1738, 2877],
                '2-55': [1738, 2661],
                '2-56': [1738, 2517],
                '2-57': [1738, 2373],
                '2-58': [1738, 1870],
                '2-59': [1955, 1366],
                '2-60': [2028, 935],
                '2-61': [1811, 935],
                '2-62': [1666, 935],
                '2-63а': [1738, 1366],
                '2-63': [1303, 935],
                '2-64': [1159, 935],
                '2-65': [941, 935],
                '2-66': [796, 935],
                '2-67': [796, 1366],
                '2-68': [941, 1366],
                '2-68а': [1159, 1366],
                '2-69': [1303, 2157],
                '2-70': [1303, 2373],
                '2-71': [1303, 2517],
                '2-72': [1303, 2661],
                '2-73': [1303, 2877],
                '2-74': [1303, 3021],
                '2-75': [1159, 3668],
                '2-76': [941, 3668],
                '2-77': [796, 3668],
                '2-78': [796, 4100],
                '2-79': [941, 4100],
                '2-80': [1159, 4100],
                '2-81': [1303, 4100],
                '2-82': [1448, 4100],
                '2-83': [1666, 4100],
                '2-84': [1738, 3740],
                'ру-2б': [1738, 1726],
                'цфа': [4998, 2500],
                'юфа': [7026, 2500],
                'сфа': [3042, 2500],
                'ниияф': [8620, 1150]}
third_floor = {'3-22': [8841, 3493],
               '3-23': [9056, 3493],
               '3-24': [9200, 3493],
               '3-25': [9056, 3850],
               '3-26': [8841, 3850],
               '3-27': [8697, 3850],
               '3-28': [8553, 3850],
               '3-29': [8409, 3850],
               '3-30': [8266, 3850],
               '3-31': [8338, 3493],
               '3-31а': [8553, 3137],
               '3-31б': [8266, 3137],
               '3-32': [7475, 3565],
               '3-32б': [7259, 3565],
               '3-32а': [7116, 3565],
               '3-33': [6900, 3565],
               '3-34': [6756, 3565],
               '3-35': [6612, 3565],
               '3-36': [6469, 3565],
               '3-37': [6253, 3565],
               '3-38': [5966, 3565],
               '3-39': [5750, 3565],
               '3-40': [5534, 3565],
               '3-41': [5319, 3565],
               '3-42': [5103, 3565],
               '3-43': [4887, 3565],
               '3-45': [4240, 3565],
               '3-46': [3881, 3565],
               '3-47а': [3665, 3565],
               '3-47': [3522, 3565],
               '3-48': [3306, 3565],
               '3-49': [2950, 3500],
               '3-50': [7619, 3137],
               '3-51': [7403, 3137],
               '3-51а': [7116, 3137],
               '3-52': [6900, 3137],
               '3-53': [6397, 3137],
               '3-54': [6612, 3137],
               '3-55': [5319, 3137],
               '3-56а': [4240, 3137],
               '3-56': [4025, 3137],
               '3-57': [3665, 3137],
               '3-58': [3522, 3137],
               '3-59а': [3378, 3137],
               '3-59': [3018, 3137],
               '3-60': [2372, 3137],
               '3-61': [2372, 2852],
               '3-62': [2372, 2709],
               '3-63': [2372, 2566],
               '3-64': [2160, 2200],
               '3-65': [2372, 2139],
               '3-66': [2160, 1900],
               '3-67': [2372, 1782],
               '3-68': [2515, 1283],
               '3-69': [2515, 998],
               '3-70': [2372, 998],
               '3-71': [2228, 998],
               '3-72': [1940, 998],
               '3-73': [1653, 1140],
               '3-74': [1868, 1925],
               '3-75': [1868, 2139],
               '3-76': [1868, 2281],
               '3-77': [1868, 2424],
               '3-78': [1868, 2709],
               '3-79': [1868, 2852],
               '3-80': [1725, 3493],
               '3-80а': [1581, 3493],
               '3-80б': [1437, 3493],
               '3-81': [1437, 3850],
               '3-82': [1581, 3850],
               '3-83': [1725, 3850],
               '3-83а': [1868, 3850],
               '3-84': [2084, 3850],
               '3-85': [2300, 3850],
               '3-86': [2300, 3621],
               'ниияф': [8625, 1140],
               'ру-3б': [2300, 1675],
               'ру-3д': [3881, 3137]}
fourth_floor = {'4-17': [9432, 3720],
                '4-18': [9648, 4149],
                '4-19': [9288, 4149],
                '4-19а': [9144, 4149],
                '4-20': [9000, 4149],
                '4-21': [8712, 4149],
                '4-22а': [8928, 3434],
                '4-22б': [8640, 3434],
                '4-23а': [7920, 3863],
                '4-23': [7632, 3863],
                '4-24': [7344, 3863],
                '4-25': [7200, 3863],
                '4-26': [6984, 3863],
                '4-26а': [6552, 3863],
                '4-27': [6408, 3863],
                '4-28': [6120, 3863],
                '4-29': [5832, 3863],
                '4-30': [5616, 3863],
                '4-31': [5400, 3863],
                '4-32': [5184, 3863],
                '4-33': [4968, 3863],
                '4-34': [4608, 3863],
                '4-35': [4392, 3863],
                '4-36': [4104, 3863],
                '4-37': [3816, 3863],
                '4-38': [3672, 3863],
                '4-39а': [3384, 3863],
                '4-39': [2952, 3863],
                '4-40': [7840, 3280],
                '4-41': [7632, 3434],
                '4-42': [7272, 3434],
                '4-43': [6768, 3434],
                '4-44': [6530, 3280],
                '4-45': [4176, 3434],
                '4-46': [4032, 3434],
                '4-47': [3816, 3434],
                '4-48': [3672, 3434],
                '4-49': [3456, 3434],
                '4-50': [3240, 3434],
                '4-51': [2952, 3434],
                '4-52': [2160, 3434],
                '4-53': [2160, 3076],
                '4-54': [2160, 2933],
                '4-55': [2160, 2790],
                '4-56': [2160, 2575],
                '4-57': [2160, 2432],
                '4-58': [2160, 2289],
                '4-59': [2160, 1931],
                '4-60': [2376, 1431],
                '4-61': [2376, 1001],
                '4-62': [2160, 1001],
                '4-63': [2016, 1001],
                '4-64': [1872, 1001],
                '4-65': [1656, 1001],
                '4-65а': [1296, 1287],
                '4-66': [1656, 2074],
                '4-67': [1656, 2218],
                '4-68': [1656, 2361],
                '4-69': [1656, 2575],
                '4-70': [1656, 2718],
                '4-71': [1656, 3076],
                '4-72': [1512, 3720],
                '4-73': [1368, 3720],
                '4-74': [1152, 4149],
                '4-75': [1512, 4149],
                '4-76': [1800, 4149],
                '4-77': [2016, 4149],
                '4-78': [2160, 4149],
                '4-78а': [2088, 3792],
                'ру-4б': [2088, 1788],
                'ниияф': [9072, 1216]}
fifth_floor = {'5-18': [9455, 3870],
               '5-19': [9455, 4300],
               '5-20': [8950, 4300],
               '5-21': [8805, 4300],
               '5-22': [8550, 4120],
               '5-22а': [8733, 3942],
               '5-23': [7795, 4014],
               '5-24': [7506, 4014],
               '5-25': [7145, 4014],
               '5-26': [6857, 4014],
               '5-27': [6496, 4014],
               '5-33': [4258, 4014],
               '5-33а': [4042, 4014],
               '5-34': [3897, 4014],
               '5-33в': [3681, 4014],
               '5-35': [3392, 4014],
               '5-36': [2959, 4014],
               '5-37': [2742, 4014],
               '5-38а': [8661, 3512],
               '5-38': [7867, 3512],
               '5-39': [7578, 3512],
               '5-40': [7218, 3512],
               '5-41': [6929, 3512],
               '5-42': [6640, 3512],
               '5-43': [4042, 3512],
               '5-44': [3825, 3512],
               '5-45': [3681, 3512],
               '5-46': [3392, 3512],
               '5-47': [2959, 3512],
               '5-48': [2670, 3512],
               '5-48а': [1948, 3512],
               '5-49': [1876, 3153],
               '5-50': [1876, 2795],
               '5-51': [1876, 2365],
               '5-52': [1876, 2150],
               '5-52а': [1876, 1935],
               '5-53': [2165, 1433],
               '5-54': [2165, 1003],
               '5-55': [1948, 1003],
               '5-56': [1804, 1003],
               '5-57': [1660, 1003],
               '5-58': [1443, 1003],
               '5-59': [1227, 1218],
               '5-60': [1443, 2150],
               '5-61': [1443, 2652],
               '5-62': [1443, 3153],
               '5-63': [1299, 3870],
               '5-64': [1010, 3870],
               '5-65': [938, 4300],
               '5-66': [1154, 4300],
               '5-67': [1443, 4300],
               '5-68б': [1587, 4300],
               '5-68': [1876, 4300],
               '5-68а': [1948, 4049],
               '5-69': [1876, 3870],
               'библиотека': [4750, 3350],
               'ниияф': [9022, 1100]}

floors = [prefirst_floor, first_floor, second_floor, third_floor, fourth_floor, fifth_floor]
floors_coord = [prefirst_floor_coord, first_floor_coord, second_floor_coord, third_floor_coord, fourth_floor_coord,
                fifth_floor_coord]


schemes = [alpha_0_floor, alpha_1_floor, alpha_2_floor, alpha_3_floor, alpha_4_floor, alpha_5_floor]


def check_rooms(text):
    """
    Функция должна определять, является ли сообщение кабинетом. работает плохо, надо переписывать
    :param text: сообщение пользователя
    :return: сообщение, этаж и юг/север
    """
    try:
        text = text.lower().replace(' ', '')

        if text in ['библиотека', 'ниияф', 'цфа', 'юфа', 'сфа']:
            pass
        elif text == 'учебнаячасть':
            text = '2-38'
        elif text == 'вус':
            text = '5-68а'
        elif text[1] == ' ':
            text[1] = '-'
        elif 'ру' in text:
            if text[2] == ' ':
                text[2] = '-'
            elif text[2] != '-':
                text = text[:2] + '-' + text[2:]
        elif text[1] != '-':
            text = text[0] + '-' + text[1:]

        for floor in floors_coord:
            if text in floor.keys():

                if 'ру' in text:
                    num_letter = 3
                else:
                    num_letter = 0

                if ('сфа' in text) or ('цфа' in text) or ('юфа' in text):
                    floor = 2
                elif text[num_letter] == 'ц':
                    floor = 0
                elif text[num_letter].isdigit():
                    floor = int(text[num_letter])
                elif text == 'ниияф':
                    floor = 5

                x_1, y_1, x_2, y_2 = floors_coord[floor][text]

                if x_2 > 4651 + 844:
                    part = 'Тебе на юг'
                elif x_1 < 4651 - 844:
                    part = 'Тебе на север'
                else:
                    part = 'Тебе в центральную часть'

                return text, floor, part

        return False

    except:
        return False


def rooms(room, floor):
    """
    Сохраняет картинку с закрашенным кабинетом, который был запрошен
    :param room: Запрошенный кабинет
    :param floor: Этаж с кабинетом
    :return: Путь к сохранённой картинке
    """

    alpha = schemes[floor]
    width, height = alpha.size

    img = Image.new('RGB', (width, height), (255, 255, 255))

    if room in floors_coord[floor].keys():
        x_1, y_1, x_2, y_2 = floors_coord[floor][room]
        ImageDraw.Draw(img).rectangle((x_1, y_1, x_2, y_2), fill=(255, 145, 0))

        if room == 'ниияф':
            ImageDraw.Draw(img).rectangle((7938, 1488, 8357, 3107), fill=(255, 145, 0))
            ImageDraw.Draw(img).rectangle((8332, 1908, 8658, 3005), fill=(255, 145, 0))
        elif room == '3-86':
            ImageDraw.Draw(img).rectangle((2140, 3369, 2269, 3472), fill=(255, 145, 0))

        img.paste(alpha, (0, 0), alpha)

        hash_name = uuid.uuid4()
        path = f"Files/Rooms/Temp/{hash_name}.jpg"
        img.save(path, optimize=True, quality=0)

        return path